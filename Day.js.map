{"version":3,"file":"Day.js","sources":["../src/views/Calendar/Day.tsx"],"sourcesContent":["import * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport ButtonBase, { ButtonBaseProps } from '@material-ui/core/ButtonBase';\nimport { ExtendMui } from '../../typings/helpers';\nimport { onSpaceOrEnter } from '../../_helpers/utils';\nimport { useUtils } from '../../_shared/hooks/useUtils';\nimport { MaterialUiPickersDate } from '../../typings/date';\nimport { makeStyles, fade } from '@material-ui/core/styles';\nimport { DAY_SIZE, DAY_MARGIN } from '../../constants/dimensions';\nimport { withDefaultProps } from '../../_shared/withDefaultProps';\nimport { FORCE_FINISH_PICKER } from '../../_shared/hooks/usePickerState';\n\nconst muiComponentConfig = { name: 'MuiPickersDay' };\n\nexport const useStyles = makeStyles(\n  theme => ({\n    day: {\n      ...theme.typography.caption,\n      width: DAY_SIZE,\n      height: DAY_SIZE,\n      borderRadius: '50%',\n      padding: 0,\n      // background required here to prevent collides with the other days when animating with transition group\n      backgroundColor: theme.palette.background.paper,\n      color: theme.palette.text.primary,\n      '&:hover': {\n        backgroundColor: fade(theme.palette.action.active, theme.palette.action.hoverOpacity),\n      },\n      '&:focus': {\n        backgroundColor: fade(theme.palette.action.active, theme.palette.action.hoverOpacity),\n        '&$daySelected': {\n          willChange: 'background-color',\n          backgroundColor: theme.palette.primary.dark,\n        },\n      },\n    },\n    dayWithMargin: {\n      margin: `0 ${DAY_MARGIN}px`,\n    },\n    dayOutsideMonth: {\n      color: theme.palette.text.hint,\n    },\n    hiddenDaySpacingFiller: {\n      visibility: 'hidden',\n    },\n    today: {\n      '&:not($daySelected)': {\n        border: `1px solid ${theme.palette.text.hint}`,\n      },\n    },\n    daySelected: {\n      color: theme.palette.primary.contrastText,\n      backgroundColor: theme.palette.primary.main,\n      fontWeight: theme.typography.fontWeightMedium,\n      transition: theme.transitions.create('background-color', {\n        duration: theme.transitions.duration.short,\n      }),\n      '&:hover': {\n        willChange: 'background-color',\n        backgroundColor: theme.palette.primary.dark,\n      },\n    },\n    dayDisabled: {\n      pointerEvents: 'none',\n      color: theme.palette.text.hint,\n    },\n    dayLabel: {\n      // need for overrides\n    },\n  }),\n  muiComponentConfig\n);\n\nexport interface DayProps extends ExtendMui<ButtonBaseProps> {\n  /**\n   * The date to show.\n   */\n  day: MaterialUiPickersDate;\n  /**\n   * Is focused by keyboard navigation.\n   */\n  focused?: boolean;\n  /**\n   * Can be focused by tabbing in.\n   */\n  focusable?: boolean;\n  /**\n   * Is day in current month.\n   */\n  inCurrentMonth: boolean;\n  /**\n   * Is switching month animation going on right now.\n   */\n  isAnimating?: boolean;\n  /**\n   * Is today?\n   */\n  today?: boolean;\n  /**\n   * Disabled?.\n   */\n  disabled?: boolean;\n  /**\n   * Selected?\n   */\n  selected?: boolean;\n  /**\n   * Is keyboard control and focus management enabled.\n   */\n  allowKeyboardControl?: boolean;\n  /**\n   * Disable margin between days, useful for displaying range of days.\n   */\n  disableMargin?: boolean;\n  /**\n   * Display disabled dates outside the current month.\n   * @default false\n   */\n  showDaysOutsideCurrentMonth?: boolean;\n  /**\n   * Disable highlighting today date with a circle.\n   * @default false\n   */\n  disableHighlightToday?: boolean;\n  onDayFocus: (day: MaterialUiPickersDate) => void;\n  onDaySelect: (day: MaterialUiPickersDate, isFinish: boolean | symbol) => void;\n}\n\nconst PureDay: React.FC<DayProps> = ({\n  className,\n  day,\n  disabled,\n  hidden,\n  inCurrentMonth: isInCurrentMonth,\n  today: isToday,\n  selected,\n  focused = false,\n  focusable = false,\n  isAnimating,\n  onDayFocus,\n  onDaySelect,\n  onFocus,\n  onClick,\n  onKeyDown,\n  disableMargin = false,\n  allowKeyboardControl,\n  disableHighlightToday = false,\n  showDaysOutsideCurrentMonth = false,\n  ...other\n}) => {\n  const ref = React.useRef<HTMLButtonElement>(null);\n  const utils = useUtils();\n  const classes = useStyles();\n\n  React.useEffect(() => {\n    if (\n      focused &&\n      !disabled &&\n      !isAnimating &&\n      isInCurrentMonth &&\n      ref.current &&\n      allowKeyboardControl\n    ) {\n      ref.current.focus();\n    }\n  }, [allowKeyboardControl, disabled, focused, isAnimating, isInCurrentMonth]);\n\n  const handleFocus = (e: React.FocusEvent<HTMLButtonElement>) => {\n    if (!focused) {\n      onDayFocus(day);\n    }\n\n    if (onFocus) {\n      onFocus(e);\n    }\n  };\n\n  const handleClick = (e: React.MouseEvent<HTMLButtonElement>) => {\n    if (!disabled) {\n      onDaySelect(day, true);\n    }\n\n    if (onClick) {\n      onClick(e);\n    }\n  };\n\n  const handleKeyDown = onSpaceOrEnter(() => {\n    if (!disabled) {\n      onDaySelect(day, FORCE_FINISH_PICKER);\n    }\n  }, onKeyDown);\n\n  const dayClassName = clsx(\n    classes.day,\n    {\n      [classes.daySelected]: selected,\n      [classes.dayDisabled]: disabled,\n      [classes.dayWithMargin]: !disableMargin,\n      [classes.today]: !disableHighlightToday && isToday,\n      [classes.dayOutsideMonth]: !isInCurrentMonth && showDaysOutsideCurrentMonth,\n    },\n    className\n  );\n\n  if (!isInCurrentMonth && !showDaysOutsideCurrentMonth) {\n    // Do not render button and not attach any listeners for empty days\n    return <div aria-hidden className={clsx(dayClassName, classes.hiddenDaySpacingFiller)} />;\n  }\n\n  return (\n    <ButtonBase\n      ref={ref}\n      centerRipple\n      data-mui-test=\"day\"\n      aria-label={utils.format(day, 'fullDate')}\n      tabIndex={focused || focusable ? 0 : -1}\n      className={dayClassName}\n      {...other}\n      onFocus={handleFocus}\n      onKeyDown={handleKeyDown}\n      onClick={handleClick}\n    >\n      <span className={classes.dayLabel}>{utils.format(day, 'dayOfMonth')}</span>\n    </ButtonBase>\n  );\n};\n\nexport const areDayPropsEqual = (prevProps: DayProps, nextProps: DayProps) => {\n  return (\n    prevProps.focused === nextProps.focused &&\n    prevProps.focusable === nextProps.focusable &&\n    prevProps.isAnimating === nextProps.isAnimating &&\n    prevProps.today === nextProps.today &&\n    prevProps.disabled === nextProps.disabled &&\n    prevProps.selected === nextProps.selected &&\n    prevProps.allowKeyboardControl === nextProps.allowKeyboardControl &&\n    prevProps.disableMargin === nextProps.disableMargin &&\n    prevProps.showDaysOutsideCurrentMonth === nextProps.showDaysOutsideCurrentMonth &&\n    prevProps.disableHighlightToday === nextProps.disableHighlightToday &&\n    prevProps.className === nextProps.className &&\n    prevProps.onDayFocus === nextProps.onDayFocus &&\n    prevProps.onDaySelect === nextProps.onDaySelect\n  );\n};\n\nexport const Day = withDefaultProps(muiComponentConfig, React.memo(PureDay, areDayPropsEqual));\n\nPureDay.displayName = 'Day';\n\nPureDay.propTypes = {\n  today: PropTypes.bool,\n  disabled: PropTypes.bool,\n  selected: PropTypes.bool,\n};\n\nPureDay.defaultProps = {\n  disabled: false,\n  today: false,\n  selected: false,\n};\n"],"names":["muiComponentConfig","name","useStyles","makeStyles","theme","day","typography","caption","width","DAY_SIZE","height","borderRadius","padding","backgroundColor","palette","background","paper","color","text","primary","fade","action","active","hoverOpacity","willChange","dark","dayWithMargin","margin","DAY_MARGIN","dayOutsideMonth","hint","hiddenDaySpacingFiller","visibility","today","border","daySelected","contrastText","main","fontWeight","fontWeightMedium","transition","transitions","create","duration","dayDisabled","pointerEvents","dayLabel","PureDay","className","disabled","hidden","isInCurrentMonth","inCurrentMonth","isToday","selected","focused","focusable","isAnimating","onDayFocus","onDaySelect","onFocus","onClick","onKeyDown","disableMargin","allowKeyboardControl","disableHighlightToday","showDaysOutsideCurrentMonth","other","ref","React","utils","useUtils","classes","current","focus","handleFocus","e","handleClick","handleKeyDown","onSpaceOrEnter","FORCE_FINISH_PICKER","dayClassName","clsx","React.createElement","format","areDayPropsEqual","prevProps","nextProps","Day","withDefaultProps","displayName","propTypes","PropTypes","defaultProps"],"mappings":"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"}